<!DOCTYPE HTML>
<html lang="zh-cmn-Hans">
<head>
    <title>Kelib</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="theme-color" content="#486E62">
    <meta name="mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="./css/typo.css">
    <link rel="stylesheet" href="./css/lite.css">
    <script src="./js/jquery-1.11.3.min.js"></script>
</head>
<body>
	<h1>Kelib</h1>
	<div id="file_list">Lib Loading...</div>
	<div class="footer">
		<p class="info">Kelib stands for Kelib E-book Library.Made By <a href="http://krrxue.duapp.com/md/">Kr</a>.</p>
	</div>
	<script>
		var dirNumber = 0;
				
		function getRepoContents(url){
			$.getJSON('https://api.github.com/repos/tccoin/Kr/contents/'+url,function(r){
				console.log(r);
				var dirName = getDirName(url);
				$('#file_list').html('<div id="dir_'+dirNumber+'"><strong>'+dirName+'</strong><br></div>');
				for(var i=0;i<r.length;i++){
					var file = r[i];
					if(file.type == 'dir'){
						getRepoContents(file.name+'/');
					}else{
						$('#'+dirNumber+' #file_list').append('<a href="'+file.download_url+'">'+file.name+'</p>');
					}
				}
				dirNumber++;
			});
		}
		
		function getDirName(url){
			var dirNameDic = [
				['','根目录']
			];
		}
	</script>
</body>
</html>